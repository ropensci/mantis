<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Get started with mantis • mantis</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get started with mantis">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mantis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/mantis.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/bespoke-reports.html">Creating bespoke reports</a></li>
    <li><a class="dropdown-item" href="../articles/alert-rules.html">Specifying alerting rules</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-example-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Example reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-example-reports">
<li><a class="dropdown-item" href="../articles/example-report-interactive.html">Interactive report</a></li>
    <li><a class="dropdown-item" href="../articles/example-report-static-heatmap.html">Heatmap report</a></li>
    <li><a class="dropdown-item" href="../articles/example-report-static-multipanel.html">Multipanel report</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/mantis/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get started with mantis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/mantis/blob/v1.0.1/vignettes/mantis.Rmd" class="external-link"><code>vignettes/mantis.Rmd</code></a></small>
      <div class="d-none name"><code>mantis.Rmd</code></div>
    </div>

    
    
<p>This vignette demonstrates how to use this package to generate
different types of html reports that allow you to visually review
multiple related time series quickly and easily.</p>
<div class="section level2">
<h2 id="data-format">Data format<a class="anchor" aria-label="anchor" href="#data-format"></a>
</h2>
<p>The data frame containing the time series should be in long format,
with the following columns (though the actual column names can be
different):</p>
<ul>
<li>one “timepoint” (date/posixt) column which will be used for the
x-axes. Values should follow a regular pattern, e.g. daily or monthly,
but do not have to be consecutive.</li>
<li>one or more “item” (character) columns containing categorical values
identifying distinct time series.</li>
<li>one “value” (numeric) column containing the time series values which
will be used for the y-axes.</li>
</ul>
<p><strong>Example:</strong></p>
<p>The <code>example_prescription_numbers</code> dataset is provided
with this package, and contains (synthetic) examples of aggregate
numbers of antibiotic prescriptions given in a hospital over a period of
a year. It contains 5 columns:</p>
<ul>
<li>PrescriptionDate - The date the prescriptions were written</li>
<li>Antibiotic - The name of the antibiotic prescribed</li>
<li>Spectrum - The spectrum of activity of the antibiotic. This value is
always the same for a particular antibiotic</li>
<li>NumberOfPrescriptions - The number of prescriptions written for this
antibiotic on this day</li>
<li>Location - The hospital site where the prescription was written</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first, attach the package if you haven't already</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/mantis" class="external-link">mantis</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># this example data frame contains numbers of antibiotic prescriptions</span></span>
<span><span class="co"># in long format</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"example_prescription_numbers"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_prescription_numbers</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   PrescriptionDate Antibiotic    Spectrum NumberOfPrescriptions Location</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2022-01-01       Coamoxiclav   Broad                       45 SITE1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2022-01-01       Gentamicin    Broad                       34 SITE1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2022-01-01       Ceftriaxone   Broad                       36 SITE1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2022-01-01       Metronidazole Limited                     17 SITE1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2022-01-01       Meropenem     Broad                       10 SITE1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2022-01-01       Vancomycin    Limited                      0 SITE1</span></span></code></pre></div>
<div class="section level3">
<h3 id="specifying-the-data-columns">Specifying the data columns<a class="anchor" aria-label="anchor" href="#specifying-the-data-columns"></a>
</h3>
<p>You must specify which column(s) in the supplied data frame should be
used to identify the individual time series (items), and which columns
contain the timepoint (x-axis) and value (y-axis) for the time series.
These are set using the <code>item_cols</code>,
<code>timepoint_col</code> and <code>value_col</code> parameters of
<code><a href="../reference/inputspec.html">inputspec()</a></code> respectively. Any other columns in the data
frame are ignored.</p>
<p>Optionally, if there are multiple columns specified in
<code>item_cols</code>, one of them can be used to group the time series
into different tabs on the report, by using the <code>tab_col</code>
parameter.</p>
<p>Members of <code>item_cols</code> should be specified in the order
that you want them to appear in the output.</p>
<p><strong>Example:</strong></p>
<p>For the <code>example_prescription_numbers</code> dataset above, the
combination of “Antibiotic” and “Location” columns uniquely identify a
time series in the data frame, and so both columns must be included in
<code>item_cols</code>.</p>
<p>The “Spectrum” column can also be added to <code>item_cols</code> as
well if desired, in which case it will appear in the output as an
additional column/label. Otherwise it will be ignored.</p>
<p>Here are some options for specifying the data columns, depending on
how you want the report to look:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># create a flat report, and include the "Location" and "Antibiotic" fields</span></span>
<span><span class="co"># in the content</span></span>
<span><span class="va">inspec_flat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inputspec.html">inputspec</a></span><span class="op">(</span></span>
<span>  timepoint_col <span class="op">=</span> <span class="st">"PrescriptionDate"</span>,</span>
<span>  item_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Location"</span>, <span class="st">"Antibiotic"</span><span class="op">)</span>,</span>
<span>  value_col <span class="op">=</span> <span class="st">"NumberOfPrescriptions"</span>,</span>
<span>  timepoint_unit <span class="op">=</span> <span class="st">"day"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a flat report, and include the "Location", "Spectrum", and "Antibiotic"</span></span>
<span><span class="co"># fields in the content</span></span>
<span><span class="va">inspec_flat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inputspec.html">inputspec</a></span><span class="op">(</span></span>
<span>  timepoint_col <span class="op">=</span> <span class="st">"PrescriptionDate"</span>,</span>
<span>  item_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Location"</span>, <span class="st">"Spectrum"</span>, <span class="st">"Antibiotic"</span><span class="op">)</span>,</span>
<span>  value_col <span class="op">=</span> <span class="st">"NumberOfPrescriptions"</span>,</span>
<span>  timepoint_unit <span class="op">=</span> <span class="st">"day"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a tabbed report, with a separate tab for each unique value of</span></span>
<span><span class="co"># "Location", and include just the "Antibiotic" field in the content of each tab</span></span>
<span><span class="va">inspec_tabbed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inputspec.html">inputspec</a></span><span class="op">(</span></span>
<span>  timepoint_col <span class="op">=</span> <span class="st">"PrescriptionDate"</span>,</span>
<span>  item_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Antibiotic"</span>, <span class="st">"Location"</span><span class="op">)</span>,</span>
<span>  value_col <span class="op">=</span> <span class="st">"NumberOfPrescriptions"</span>,</span>
<span>  tab_col <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>  timepoint_unit <span class="op">=</span> <span class="st">"day"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a tabbed report, with a separate tab for each unique value of</span></span>
<span><span class="co"># "Location", and include the "Antibiotic" and "Spectrum" fields in the content</span></span>
<span><span class="co"># of each tab</span></span>
<span><span class="va">inspec_tabbed2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inputspec.html">inputspec</a></span><span class="op">(</span></span>
<span>  timepoint_col <span class="op">=</span> <span class="st">"PrescriptionDate"</span>,</span>
<span>  item_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Antibiotic"</span>, <span class="st">"Spectrum"</span>, <span class="st">"Location"</span><span class="op">)</span>,</span>
<span>  value_col <span class="op">=</span> <span class="st">"NumberOfPrescriptions"</span>,</span>
<span>  tab_col <span class="op">=</span> <span class="st">"Location"</span>,</span>
<span>  timepoint_unit <span class="op">=</span> <span class="st">"day"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a tabbed report, with a separate tab for each unique value of</span></span>
<span><span class="co"># "Antibiotic", and include just the "Location" field in the content of each tab</span></span>
<span><span class="va">inspec_tabbed3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inputspec.html">inputspec</a></span><span class="op">(</span></span>
<span>  timepoint_col <span class="op">=</span> <span class="st">"PrescriptionDate"</span>,</span>
<span>  item_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Antibiotic"</span>, <span class="st">"Location"</span><span class="op">)</span>,</span>
<span>  value_col <span class="op">=</span> <span class="st">"NumberOfPrescriptions"</span>,</span>
<span>  tab_col <span class="op">=</span> <span class="st">"Antibiotic"</span>,</span>
<span>  timepoint_unit <span class="op">=</span> <span class="st">"day"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="specifying-the-timepoint-unit">Specifying the timepoint unit<a class="anchor" aria-label="anchor" href="#specifying-the-timepoint-unit"></a>
</h3>
<p>In this example dataset, the time series contain daily values, which
is the default pattern of timepoints expected by the package. If the
time series were to contain e.g. monthly or hourly values, this should
be specified using the <code>timepoint_unit</code> parameter of
<code><a href="../reference/inputspec.html">inputspec()</a></code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="generating-a-report">Generating a report<a class="anchor" aria-label="anchor" href="#generating-a-report"></a>
</h2>
<p>The simplest way to create a report is to use the
<code><a href="../reference/mantis_report.html">mantis_report()</a></code> function.</p>
<p>We need to decide where to save the report to. The file name can only
contain alphanumeric, <code>-</code> and <code>_</code> characters, and
should include the extension “.html”. If a path is supplied, the
directory should already exist. We can also optionally specify a short
description for the dataset, which will appear on the report.</p>
<p>There are 3 different options for visualising the time series. This
is set using the <code>outputspec</code> parameter.</p>
<div class="section level3">
<h3 id="interactive-plots">Interactive plots<a class="anchor" aria-label="anchor" href="#interactive-plots"></a>
</h3>
<p>This is the default visualisation, and produces a table with one time
series in each row, with orderable and filterable columns showing the
previously-specified <code>item_cols</code> for identifying the time
series. Also in the table are the maximum value of each time series, and
bar plots with adjustable axes and tooltips showing the individual dates
and values.</p>
<p>There are some options for adjusting the output, such as changing
column labels, plot type, and whether or not to use the same y-axis
scale across the table. This can be done using the
<code><a href="../reference/outputspec_interactive.html">outputspec_interactive()</a></code> function when supplying the
<code>outputspec</code> parameter.</p>
<p><strong>Example:</strong></p>
<p>For the <code>example_prescription_numbers</code> dataset above, we
will save a report in the working directory, with separate tabs for each
hospital site.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mantis_report.html">mantis_report</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">example_prescription_numbers</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"example_prescription_numbers_interactive.html"</span>,</span>
<span>  inputspec <span class="op">=</span> <span class="va">inspec_tabbed2</span>,</span>
<span>  outputspec <span class="op">=</span> <span class="fu"><a href="../reference/outputspec_interactive.html">outputspec_interactive</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  report_title <span class="op">=</span> <span class="st">"mantis report"</span>,</span>
<span>  dataset_description <span class="op">=</span> <span class="st">"Antibiotic prescriptions by site"</span>,</span>
<span>  show_progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/example_prescription_numbers_interactive.png" width="500"></p>
</div>
<div class="section level3">
<h3 id="static-plots">Static plots<a class="anchor" aria-label="anchor" href="#static-plots"></a>
</h3>
<p>Alternatively, the report can output static plots. This can be useful
if interactivity is not needed, or if file sizes need to be kept small.
There are currently two types of static visualisations: heatmap or
multipanel, and are selected by using the
<code><a href="../reference/outputspec_static_heatmap.html">outputspec_static_heatmap()</a></code> or
<code><a href="../reference/outputspec_static_multipanel.html">outputspec_static_multipanel()</a></code> function when supplying the
<code>outputspec</code> parameter.</p>
<div class="section level4">
<h4 id="heatmap">Heatmap<a class="anchor" aria-label="anchor" href="#heatmap"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mantis_report.html">mantis_report</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">example_prescription_numbers</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"example_prescription_numbers_heatmap.html"</span>,</span>
<span>  inputspec <span class="op">=</span> <span class="va">inspec_tabbed</span>,</span>
<span>  outputspec <span class="op">=</span> <span class="fu"><a href="../reference/outputspec_static_heatmap.html">outputspec_static_heatmap</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  report_title <span class="op">=</span> <span class="st">"mantis report"</span>,</span>
<span>  dataset_description <span class="op">=</span> <span class="st">"Antibiotic prescriptions by site"</span>,</span>
<span>  show_progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/example_prescription_numbers_heatmap.png" width="500"></p>
</div>
<div class="section level4">
<h4 id="multipanel">Multipanel<a class="anchor" aria-label="anchor" href="#multipanel"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mantis_report.html">mantis_report</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">example_prescription_numbers</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"example_prescription_numbers_multipanel.html"</span>,</span>
<span>  inputspec <span class="op">=</span> <span class="va">inspec_tabbed</span>,</span>
<span>  outputspec <span class="op">=</span> <span class="fu"><a href="../reference/outputspec_static_multipanel.html">outputspec_static_multipanel</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  report_title <span class="op">=</span> <span class="st">"mantis report"</span>,</span>
<span>  dataset_description <span class="op">=</span> <span class="st">"Antibiotic prescriptions by site"</span>,</span>
<span>  show_progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/example_prescription_numbers_multipanel.png" width="500"></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by T. Phuong Quan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
